<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartLifeFood - Retro UI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* Styl Starego Facebooka / iOS */
        :root {
            --fb-blue: #3b5998;
            --fb-dark-blue: #2d4373;
            --fb-bg: #e9ebee;
        }

        body { background-color: var(--fb-bg); }

        /* Klasyczny niebieski pasek z gradientem */
        .fb-header {
            background: linear-gradient(to bottom, #4c66a4 0%, #3b5998 100%);
            border-bottom: 1px solid #2d4373;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* Menu boczne w stylu "Drawer" */
        .sidebar-old-school {
            background: #2d3136;
            color: #bdc1c6;
        }

        .sidebar-item-active {
            background: #191c1f;
            color: white;
            box-shadow: inset 4px 0 0 #3b5998;
        }

        /* Przyciski skeuomorficzne (wypukłe) */
        .fb-btn {
            background: linear-gradient(to bottom, #ffffff 0%, #f1f1f1 100%);
            border: 1px solid #ced4da;
            border-radius: 6px;
            box-shadow: inset 0 1px 0 white, 0 1px 2px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }

        .fb-btn:active {
            background: #ebebeb;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .fb-btn-blue {
            background: linear-gradient(to bottom, #4c66a4 0%, #3b5998 100%);
            border: 1px solid #2d4373;
            color: white;
            text-shadow: 0 -1px 0 rgba(0,0,0,0.5);
        }

        /* Animacja paragonu */
        @keyframes print-receipt {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(0); }
        }
        .receipt-out { animation: print-receipt 2s ease-out forwards; }
    </style>
</head>
<body class="h-screen w-screen overflow-hidden select-none">

<div id="app" class="h-full w-full flex flex-col">

    <div v-if="screen === 'init'" class="absolute inset-0 z-[200] bg-white flex flex-col items-center justify-center p-10">
        <div class="fb-header w-full absolute top-0 h-16 flex items-center justify-center text-white font-bold text-xl">
            SmartLifeFood Accessibility
        </div>
        <h2 class="text-2xl font-bold mb-8">Czy włączyć lektora?</h2>
        <div class="flex gap-4">
            <button @click="init(true)" class="fb-btn px-10 py-5 text-xl font-bold text-blue-800 border-blue-300">TAK (GŁOS)</button>
            <button @click="init(false)" class="fb-btn px-10 py-5 text-xl font-bold text-gray-600">NIE</button>
        </div>
    </div>

    <div v-if="screen === 'welcome'" class="absolute inset-0 z-[150] bg-[#3b5998] flex flex-col items-center justify-center text-white cursor-pointer" @click="screen = 'selection'">
        <i class="fab fa-facebook-square text-[120px] mb-6"></i>
        <h1 class="text-4xl font-bold mb-2">SmartLifeFood</h1>
        <p class="opacity-70 animate-pulse">Dotknij, aby się zalogować do menu</p>
    </div>

    <div v-if="screen === 'selection'" class="absolute inset-0 z-[140] bg-[#e9ebee] flex flex-col p-10 items-center justify-center">
        <h2 class="text-3xl font-bold text-[#3b5998] mb-10">Wybierz sposób zamówienia:</h2>
        <div class="grid grid-cols-2 gap-6 w-full max-w-2xl">
            <div @click="setOption('Na miejscu')" class="fb-btn p-10 flex flex-col items-center gap-4 cursor-pointer">
                <i class="fas fa-utensils text-5xl text-blue-700"></i>
                <span class="text-2xl font-bold">NA MIEJSCU</span>
            </div>
            <div @click="setOption('Na wynos')" class="fb-btn p-10 flex flex-col items-center gap-4 cursor-pointer">
                <i class="fas fa-shopping-bag text-5xl text-gray-600"></i>
                <span class="text-2xl font-bold">NA WYNOS</span>
            </div>
        </div>
    </div>

    <div v-if="screen === 'card_prompt'" class="absolute inset-0 z-[130] bg-white flex flex-col items-center justify-center p-10">
        <div class="bg-blue-100 p-8 rounded-full mb-8">
            <i class="fas fa-id-card text-7xl text-blue-600 animate-bounce"></i>
        </div>
        <h2 class="text-3xl font-bold mb-4">Skanuj Kartę SmartLife</h2>
        <p class="text-gray-500 mb-10">Zyskaj -15% na całe zamówienie</p>
        <button @click="applyCard" class="fb-btn-blue w-full max-w-sm py-6 text-2xl font-bold mb-4 uppercase">Skanuj Symulację</button>
        <button @click="screen = 'menu'" class="text-gray-400 font-bold underline">Nie mam karty</button>
    </div>

    <div v-if="['menu', 'cash_game', 'success'].includes(screen)" class="h-full flex flex-col">
        <header class="fb-header h-14 flex items-center justify-between px-4 shrink-0 z-50">
            <button @click="screen = 'selection'" class="text-white opacity-80"><i class="fas fa-bars text-xl"></i></button>
            <div class="text-white font-bold text-lg">SmartLifeFood</div>
            <div class="bg-red-600 text-white text-[10px] px-2 py-0.5 rounded-sm font-bold">LIVE</div>
        </header>

        <div class="flex-1 flex overflow-hidden">
            <nav class="w-20 sidebar-old-school flex flex-col items-center py-4 gap-6 shrink-0">
                <div v-for="cat in categories" @click="activeCategory = cat.id"
                     :class="['p-3 rounded-lg transition-all', activeCategory === cat.id ? 'sidebar-item-active' : '']">
                    <i :class="[cat.icon, 'text-2xl']"></i>
                </div>
            </nav>

            <main class="flex-1 overflow-y-auto p-4 space-y-4 pb-40">
                <div v-for="product in filteredProducts" 
                     @click="product.stock ? addToCart(product) : null"
                     :class="['fb-btn flex p-4 gap-4 items-center', !product.stock ? 'opacity-50 grayscale' : '']">
                    <div class="w-20 h-20 bg-gray-200 rounded-md flex items-center justify-center text-3xl">
                        <i :class="product.icon"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold text-lg">{{ product.name }}</h4>
                        <p class="text-blue-700 font-black text-xl">{{ product.price.toFixed(2) }} zł</p>
                        <p v-if="!product.stock" class="text-red-600 text-[10px] font-bold uppercase">Wyprzedane</p>
                    </div>
                    <div class="text-gray-300"><i class="fas fa-chevron-right"></i></div>
                </div>
            </main>
        </div>

        <footer class="h-20 bg-white border-t p-4 flex items-center justify-between shadow-2xl z-50">
            <div>
                <span v-if="discount > 0" class="text-[10px] text-green-600 font-bold block leading-none">ZNIŻKA -15% AKTYWNA</span>
                <span class="text-2xl font-black">{{ finalTotal.toFixed(2) }} zł</span>
            </div>
            <button @click="screen = 'cash_game'" class="fb-btn-blue px-8 py-3 rounded-md font-bold text-lg">PŁACĘ ({{ cart.length }})</button>
        </footer>
    </div>

    <div v-if="screen === 'cash_game'" class="fixed inset-0 z-[300] bg-zinc-900 flex flex-col items-center justify-center p-10 text-white">
        <h2 class="text-2xl font-bold mb-10">Wsuń 50 PLN do czytnika</h2>
        <div class="w-full max-w-xs h-4 bg-black border-2 border-zinc-700 shadow-[0_0_20px_rgba(52,211,153,0.5)] mb-20 rounded-full"></div>
        
        <div @click="confirmPayment" class="animate__animated animate__pulse animate__infinite">
            <div class="w-64 h-28 bg-blue-100 rounded-lg border-4 border-blue-300 flex flex-col justify-between p-3 cursor-pointer hover:scale-105 transition-transform">
                <div class="flex justify-between font-bold text-blue-900"><span>50</span><span>50</span></div>
                <div class="text-center font-bold text-blue-800">BANKNOT SMART</div>
                <div class="flex justify-between text-[8px] text-blue-900 font-black"><span>SLF KIOSK</span><span>2026</span></div>
            </div>
        </div>
        <p class="mt-10 opacity-50 uppercase text-xs tracking-widest">Kliknij banknot, aby wsunąć</p>
    </div>

    <div v-if="screen === 'success'" class="fixed inset-0 z-[400] bg-[#e9ebee] flex flex-col items-center pt-20">
        <div class="text-center mb-8 animate__animated animate__bounceIn">
            <i class="fas fa-check-circle text-7xl text-green-500 mb-4"></i>
            <h2 class="text-3xl font-bold text-gray-800">DZIĘKUJEMY!</h2>
            <p class="text-gray-500">Odbierz swój paragon poniżej</p>
        </div>

        <div class="w-64 h-3 bg-zinc-800 rounded-t-lg"></div>
        <div class="w-56 bg-white p-4 shadow-2xl border border-gray-200 receipt-out">
            <div class="text-center font-bold text-xs border-b-2 border-dashed pb-2 mb-2 italic">SmartLifeFood</div>
            <div v-for="item in cart" class="flex justify-between text-[10px] mb-1">
                <span>{{ item.name }}</span>
                <span>{{ item.price }}</span>
            </div>
            <div v-if="discount > 0" class="text-green-600 text-[9px] font-bold border-t pt-1">ZNIŻKA: -15%</div>
            <div class="border-t-2 border-dashed mt-2 pt-2 flex justify-between font-bold">
                <span>TOTAL:</span>
                <span>{{ finalTotal.toFixed(2) }} zł</span>
            </div>
            <div class="mt-4 text-center">
                <div class="text-[8px]">NUMER ZAMÓWIENIA:</div>
                <div class="text-2xl font-black">#{{ Math.floor(Math.random()*100) }}</div>
            </div>
        </div>

        <button @click="reset" class="mt-16 fb-btn-blue px-10 py-4 font-bold rounded-lg shadow-xl">ODBIERZ I ZAMKNIJ</button>
    </div>

</div>

<script>
    const { createApp } = Vue;
    createApp({
        data() {
            return {
                screen: 'init',
                useLector: false,
                orderOption: '',
                activeCategory: 'burgery',
                discount: 0,
                cart: [],
                categories: [
                    { id: 'burgery', icon: 'fas fa-hamburger', name: 'Burgery' },
                    { id: 'napoje', icon: 'fas fa-wine-glass', name: 'Napoje' },
                    { id: 'dodatki', icon: 'fas fa-cookie', name: 'Dodatki' }
                ],
                products: [
                    { id: 1, category: 'burgery', name: 'Retro Beef Burger', price: 25.00, icon: 'fas fa-burger', stock: true },
                    { id: 2, category: 'burgery', name: 'Chicken Classic', price: 19.00, icon: 'fas fa-drumstick-bite', stock: true },
                    { id: 3, category: 'burgery', name: 'Vege Post', price: 22.00, icon: 'fas fa-leaf', stock: false },
                    { id: 4, category: 'napoje', name: 'Cola Retro', price: 8.00, icon: 'fas fa-glass-whiskey', stock: true },
                    { id: 5, category: 'napoje', name: 'Sok Naturalny', price: 10.00, icon: 'fas fa-apple-whole', stock: true },
                    { id: 6, category: 'dodatki', name: 'Frytki Stekowe', price: 12.00, icon: 'fas fa-box-tissue', stock: true }
                ]
            }
        },
        computed: {
            filteredProducts() { return this.products.filter(p => p.category === this.activeCategory); },
            cartTotal() { return this.cart.reduce((s, i) => s + i.price, 0); },
            finalTotal() { return this.cartTotal * (1 - this.discount); }
        },
        methods: {
            speak(text) {
                if (!this.useLector) return;
                const msg = new SpeechSynthesisUtterance(text);
                msg.lang = 'pl-PL';
                window.speechSynthesis.speak(msg);
            },
            init(lector) {
                this.useLector = lector;
                this.screen = 'welcome';
                if(lector) this.speak("Witaj w Smart Life Food. Wybierz cokolwiek zechcesz.");
            },
            setOption(opt) {
                this.orderOption = opt;
                this.screen = 'card_prompt';
                this.speak("Czy masz naszą kartę lojalnościową?");
            },
            applyCard() {
                this.discount = 0.15;
                this.screen = 'menu';
                this.speak("Karta zaakceptowana. Przyznano piętnaście procent zniżki.");
            },
            addToCart(p) {
                this.cart.push(p);
                this.speak("Dodano " + p.name);
            },
            confirmPayment() {
                this.screen = 'success';
                this.speak("Dziękujemy. Zapłacono gotówką. Odbierz swój paragon.");
            },
            reset() {
                location.reload();
            }
        }
    }).mount('#app');
</script>
</body>
</html>
